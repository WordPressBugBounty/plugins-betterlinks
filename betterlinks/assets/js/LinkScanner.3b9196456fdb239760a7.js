"use strict";(globalThis.webpackChunkbetterlinks=globalThis.webpackChunkbetterlinks||[]).push([[499],{6560(e,t,a){a.d(t,{A:()=>q});var n=a(3453),l=a(45),s=a(1609),i=a.n(s),c=a(1225),r=a(8238),o=a(7723),m=a(9735),d=a(4086),u=a(7154),b=a(5458),p=a(8766),g=a(7400),h=a(312),v=a.n(h),k=a(20),_=a(979),y=a(2505),f=a.n(y),E=a(3348),N=[].concat((0,b.A)(k.c),[{label:"Delete All",range:function(){return{startDate:new Date("2000-01-01"),endDate:new Date}},isSelected:function(e){var t=new Date("2000-01-01"),a=new Date;return e.startDate.toDateString()===t.toDateString()&&e.endDate.toDateString()===a.toDateString()}}]);const w=(0,c.Ng)(function(){return{}},function(e){return{fetchCustomClicksData:(0,r.zH)(p.lC,e),dispatch_new_links_data:(0,r.zH)(g.dispatch_new_links_data,e),fetch_clicks_data:(0,r.zH)(p.AK,e),get_chart_data:(0,r.zH)(p.Hr,e),get_graph_data:(0,r.zH)(p.rF,e),get_medium_data:(0,r.zH)(p._I,e)}})(function(e){var t=e.fetchCustomClicksData,a=e.dispatch_new_links_data,l=e.fetch_clicks_data,i=e.get_chart_data,c=e.get_graph_data,r=e.get_medium_data,d=(e.propsForAnalytics||{}).customDateFilter,u=(0,s.useState)(0),b=(0,n.A)(u,2),p=b[0],g=b[1],h=(0,s.useState)(!1),y=(0,n.A)(h,2),w=y[0],D=y[1],S=(0,s.useState)(0),L=(0,n.A)(S,2),C=L[0],A=L[1],F=(0,s.useState)("reset_modal_step_1"),q=(0,n.A)(F,2),R=q[0],T=q[1],z=(0,s.useState)([{startDate:(0,_.A)(new Date,30),endDate:new Date,key:"selection"}]),H=(0,n.A)(z,2),x=H[0],U=H[1],Y=(0,s.useState)(""),P=(0,n.A)(Y,2),B=P[0],V=P[1],K=(0,s.useState)(0),I=(0,n.A)(K,2),j=I[0],M=I[1],O=(0,s.useState)((0,o.__)("Refresh Stats","betterlinks")),Q=(0,n.A)(O,2),G=Q[0],J=Q[1],W=(0,s.useState)((0,o.__)("Active Now","betterlinks")),X=(0,n.A)(W,2),Z=X[0],$=X[1],ee=(0,s.useState)(m.cw),te=(0,n.A)(ee,2),ae=te[0],ne=te[1];(0,s.useEffect)(function(){var e,t;return w?null===(e=document)||void 0===e||null===(e=e.body)||void 0===e||null===(e=e.classList)||void 0===e||e.add("betterlinks-delete-clicks-modal-popup-opened"):null===(t=document)||void 0===t||null===(t=t.body)||void 0===t||null===(t=t.classList)||void 0===t||t.remove("betterlinks-delete-clicks-modal-popup-opened"),function(){var e;null===(e=document)||void 0===e||null===(e=e.body)||void 0===e||null===(e=e.classList)||void 0===e||e.remove("betterlinks-delete-clicks-modal-popup-opened")}},[w]);var le=function(){clearTimeout(p),T("reset_modal_step_1"),D(!1),U([{startDate:(0,_.A)(new Date,30),endDate:new Date,key:"selection"}]),V("")},se=function(){le()},ie=(0,E.useLocation)(),ce=new URLSearchParams(ie.search).get("id"),re="RESET CLICKS"===B.trim();return(0,s.createElement)("div",{className:"btl-analytic-reset-wrapeer btl-btn-groups betterlinks"},(0,s.createElement)("button",{className:"button-secondary-gray btl-reset-analytics-initial-button",onClick:function(){D(!0),T("reset_modal_step_1")}},ce?"Reset Link Clicks":"Reset"),(0,s.createElement)("div",{className:"status btl-refresh-btn"},ae?(0,s.createElement)(s.Fragment,null,(0,s.createElement)("img",{width:18,height:18,src:m.hq+"/assets/images/icons/refresh.svg",alt:"Refresh"}),(0,s.createElement)("button",{type:"button",onClick:function(){J((0,o.__)("Refreshing...","betterlinks")),f().post("".concat(ajaxurl,"?action=betterlinks/admin/analytics&security=").concat(m.sL)).then(function(e){if(e.data)if((0,m.o6)(null,(0,o.__)("Done!","betterlinks"),(0,o.__)("Refresh Stats","betterlinks"),J),d&&d[0]){var t={from:(0,m.Yq)(d[0].startDate,"yyyy-mm-dd"),to:(0,m.Yq)(d[0].endDate,"yyyy-mm-dd"),setLoading:function(){}};l(t),i(t),c(t),r(t)}else{var a={setLoading:function(){}};l(a),i(a),c(a),r(a)}},function(e){console.log(e)})},className:"btl-refresh-btn button button-primary"},G)):(0,s.createElement)(s.Fragment,null,(0,s.createElement)("button",{type:"button",onClick:function(){$((0,o.__)("Activating...","betterlinks")),f().post("".concat(ajaxurl,"?action=betterlinks/admin/write_json_clicks&security=").concat(m.sL)).then(function(e){e.data&&((0,m.o6)(null,(0,o.__)("Activated!","betterlinks"),(0,o.__)("Active Now","betterlinks"),$),setTimeout(function(){ne(!0)},1500))},function(e){console.log(e)})},className:"btl-refresh-btn button button-primary"},Z))),(0,s.createElement)(v(),{isOpen:w,onRequestClose:le,ariaHideApp:!1,className:"".concat("reset_modal_step_1"!==R?"btl-anl-delete-clicks-modal":""),style:{position:"absolute",inset:"40px"}},(0,s.createElement)("div",{className:"btl-reset-modal-popup-wrapper ".concat("reset_modal_step_1"===R?"step-1-active":""," ").concat("reset_modal_step_2"===R?"step-2-active":"")},"reset_modal_step_1"!==R&&(0,s.createElement)("span",{className:"btl-close-modal",onClick:le},(0,s.createElement)("i",{className:"btl btl-cancel"})),"reset_modal_step_1"===R&&(0,s.createElement)("div",{className:"btl-reset-modal-popup btl-reset-modal-popup-step-1 betterlinks-body"},(0,s.createElement)("div",{className:"btl-compact-date-picker"},(0,s.createElement)("div",{className:"btl-date-picker-title"},ce?"Select Date Range for Link Clicks":"Pick the range of BetterLinks Analytics that you want to reset."),(0,s.createElement)("button",{onClick:se,className:"btn-date-range-close"},(0,s.createElement)("span",{className:"dashicons dashicons-no-alt"})),(0,s.createElement)(k.Ur,{onChange:function(e){U([e.selection])},showSelectionPreview:!0,moveRangeOnFirstSelection:!1,months:2,ranges:x,direction:"horizontal",showMonthAndYearPickers:!0,showDateDisplay:!0,rangeColors:["#007cba"],color:"#007cba",staticRanges:N,inputRanges:[]}),(0,s.createElement)("div",{className:"btl-date-picker-actions"},(0,s.createElement)("button",{className:"button-primary btl-apply-date-range",onClick:function(){if(x&&x[0]){var e=(0,m.Yq)(x[0].startDate,"yyyy-mm-dd"),t=(0,m.Yq)(x[0].endDate,"yyyy-mm-dd"),a=new FormData;a.append("action","betterlinks/admin/get_clicks_count"),a.append("security",m.sL),a.append("from",e),a.append("to",t),null!==ce&&a.append("link_id",ce),f().post(ajaxurl,a).then(function(e){e.data&&e.data.success&&M(e.data.data.count||0),T("reset_modal_step_2"),V("")},function(e){console.log(e),M(0),T("reset_modal_step_2"),V("")})}}},(0,s.createElement)("img",{width:16,height:16,src:m.hq+"/assets/images/icons/trash-red.svg"}),"Reset Click"),(0,s.createElement)("button",{className:"button-primary btl-cancel-date-range",onClick:se},"Cancel")))),"reset_modal_step_2"===R&&(0,s.createElement)("div",{className:"btl-reset-modal-popup btl-reset-modal-popup-step-2 betterlinks-body"},(0,s.createElement)("img",{width:48,height:48,src:m.hq+"/assets/images/icons/warning.svg",alt:"Warning",className:"btl-warning-icon"}),(0,s.createElement)("div",{className:"btl-reset-modal-popup-title"},"This Action Cannot be Undone"),(0,s.createElement)("p",{className:"btl-delete-description"},"You are about to permanently delete click analytics from"),(0,s.createElement)("div",{className:"btl-analytics-dlt-date"},(0,s.createElement)("span",{className:"btl-date-range"},x[0].startDate.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})," â€“ ",x[0].endDate.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),"."),(0,s.createElement)("div",{className:"btl-delete-count-box"},"A total of ",(0,s.createElement)("strong",{className:"btl-delete-count"},j.toLocaleString())," click record",1!==j?"s":""," will be removed."),(0,s.createElement)("div",{className:"btl-confirmation-section"},(0,s.createElement)("div",{className:"btl-confirmation-label"},"To confirm, type ",(0,s.createElement)("b",null,"RESET CLICKS")),(0,s.createElement)("input",{type:"text",required:!0,className:"btl-modal-form-control btl-reset-confirmation-input",placeholder:"RESET CLICKS",value:B,onChange:function(e){V(e.target.value)}})),(0,s.createElement)("div",{className:"btl-btn-reset-popup-step-2-buttons"},(0,s.createElement)("button",{className:"btl-button-cancel btl-btn-reset-cancel",onClick:function(){return T("reset_modal_step_1")}},"Cancel"),(0,s.createElement)("button",{className:"btl-button-danger btl-btn-reset-apply-2 ".concat(re?"":"disabled"),onClick:function(){if("RESET CLICKS"===B.trim()){if(x&&x[0]){var e=(0,m.Yq)(x[0].startDate,"yyyy-mm-dd"),n=(0,m.Yq)(x[0].endDate,"yyyy-mm-dd");T("deleting"),(0,m.Xq)(!1,e,n,ce).then(function(e){var n,s=setTimeout(function(){le()},444e3);if(g(s),null!=e&&null!==(n=e.data)&&void 0!==n&&n.success){var o,u,b;if(A(null==e||null===(o=e.data)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.count),t({data:null==e||null===(u=e.data)||void 0===u||null===(u=u.data)||void 0===u?void 0:u.new_clicks_data}),a({data:null==e||null===(b=e.data)||void 0===b||null===(b=b.data)||void 0===b?void 0:b.new_links_data}),d&&d[0]){var p={from:(0,m.Yq)(d[0].startDate,"yyyy-mm-dd"),to:(0,m.Yq)(d[0].endDate,"yyyy-mm-dd"),setLoading:function(){}};l(p),i(p),c(p),r(p)}else{var h={setLoading:function(){}};l(h),i(h),c(h),r(h)}T("success")}else T("failed")}).catch(function(e){console.log("---caught error on DeleteClicks",{err:e});var t=setTimeout(function(){le()},3e3);g(t)})}}else{var s=document.querySelector(".btl-confirmation-input");s&&s.focus()}},disabled:!re},(0,s.createElement)("img",{width:14,height:14,src:m.hq+"/assets/images/icons/delete.svg",alt:"Delete"}),"Delete"))),"deleting"===R&&(0,s.createElement)("div",{className:"btl-reset-deleting-modal"},(0,s.createElement)("img",{width:48,height:48,src:m.hq+"/assets/images/icons/warning.svg",alt:"Deleting",className:"btl-deleting-icon"}),(0,s.createElement)("div",{className:"btl-reset-deleting-modal-title"},"Processing..."),(0,s.createElement)("div",{className:"btl-reset-deleting-modal-description"},"Deleting click analytics data from ",(0,s.createElement)("span",{className:"btl-date-range-processing"}," ",x[0].startDate.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"})," to ",x[0].endDate.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"})," ")," ."),(0,s.createElement)("div",{className:"btl-reset-deleting-modal-processing"}," This may take a moment.")),"success"===R&&0!==C&&(0,s.createElement)("div",{className:"btl-reset-finish-modal"},(0,s.createElement)("img",{width:90,height:90,src:m.hq+"/assets/images/icons/completed.svg"}),(0,s.createElement)("span",{className:"btl-reset-finish-modal-title"},C," Click data has been successfully deleted"),(0,s.createElement)("span",{className:"btl-reset-finish-modal-description"},"Click data has been successfully deleted for ",x[0].startDate.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"})," to ",x[0].endDate.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"}),"."),(0,s.createElement)("button",{className:"button-primary btl-cancel-finish-date-range",onClick:se},"Back to Analytics")),"success"===R&&0===C&&(0,s.createElement)("div",{className:"btl-reset-not-found-wrapper"},(0,s.createElement)("img",{width:90,height:90,src:m.hq+"/assets/images/icons/not-found.svg"}),(0,s.createElement)("h2",{className:"btl-reset-not-found-modal-title"},"No clicks data found ",ce?"for this link ":"","in the selected date range ",(0,s.createElement)("span",{className:"btl-reset-date-range"}," ",x[0].startDate.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"})," to ",x[0].endDate.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"})," "))),"failed"===R&&(0,s.createElement)("h2",null,"Failed!!"))))});var D=a(5556),S=a.n(D),L=a(150),C=["is_pro","render"],A={label:S().string,render:S().func},F=function(e){var t=e.is_pro,a=void 0!==t&&t,c=e.render,r=void 0===c?function(){}:c,d=(0,l.A)(e,C),u=d.propsForAnalytics,b=d.activity.darkMode,p=(0,s.useState)(b),g=(0,n.A)(p,2),h=g[0],v=g[1];(0,s.useEffect)(function(){b?document.body.classList.add("betterlinks-dark-mode"):document.body.classList.remove("betterlinks-dark-mode")},[]);var k=betterLinksQuery.get("page"),_=d.favouriteSort.sortByFav;return(0,s.createElement)("div",{className:"topbar"},(0,s.createElement)("div",{className:"topbar__logo_container"},(0,s.createElement)("div",{className:"topbar__logo"},(0,s.createElement)("img",{src:m.hq+"assets/images/logo-large".concat(h?"-white":"",".svg"),alt:"logo"}),(0,s.createElement)("span",{className:"topbar__logo__text"},d.label),a&&(0,s.createElement)(L.A,null)),r()),(0,s.createElement)("div",{className:"topbar-inner"},"betterlinks"===k&&(0,s.createElement)(i().Fragment,null,(0,s.createElement)("div",{className:"btl-view-control"},(0,s.createElement)("button",{title:(0,o.__)("Favorite Links","betterlinks"),className:"btl-link-view-toggler btl-sortby-fav ".concat(_?"active":""),onClick:function(){return d.sortFavourite(!_)}},(0,s.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"favorite-svg",viewBox:"0 0 512 512",xmlSpace:"preserve"},(0,s.createElement)("path",{className:"fav-icon-svg-path",d:"M392.2 317.5c-3 2.9-4.4 7.1-3.7 11.3L414 477.4c1.2 7-3.5 13.6-10.5 14.9-2.8.5-5.6 0-8.1-1.3L262 420.9c-3.7-2-8.2-2-12 0L116.6 491c-3.1 1.7-6.8 1.9-10.1.8-6-2.1-9.5-8.1-8.5-14.4l25.4-148.5c.7-4.2-.7-8.4-3.7-11.4L11.9 212.4c-5.1-5-5.2-13.1-.2-18.2 2-2 4.6-3.3 7.3-3.7l149.1-21.7c4.2-.6 7.8-3.2 9.7-7l66.7-135c2.6-5.3 8.4-8.1 14.2-6.9 3.9.7 7.2 3.3 8.9 6.9l66.7 135c1.9 3.8 5.5 6.4 9.7 7l149 21.6c7 1 11.9 7.6 10.9 14.6-.4 2.7-1.7 5.3-3.7 7.2l-108 105.3z"}))),(0,s.createElement)("button",{title:(0,o.__)("List View","betterlinks"),className:"btl-link-view-toggler ".concat("list"==d.activity.linksView?"active":""),onClick:function(){return d.linksView("list")}},(0,s.createElement)("i",{className:"btl btl-list"})),(0,s.createElement)("button",{title:(0,o.__)("Grid View","betterlinks"),className:"btl-link-view-toggler ".concat("grid"==d.activity.linksView?"active":""),onClick:function(){return d.linksView("grid")}},(0,s.createElement)("i",{className:"btl btl-grid"})))),(null==u?void 0:u.isResetAnalytics)&&(0,s.createElement)(w,{propsForAnalytics:u}),(0,s.createElement)("label",{className:"theme-mood-button",htmlFor:"theme-mood",title:(0,o.__)("Theme Mode","betterlinks")},(0,s.createElement)("input",{type:"checkbox",name:"theme-mood",id:"theme-mood",value:h,onChange:function(){return function(e){e?document.body.classList.add("betterlinks-dark-mode"):document.body.classList.remove("betterlinks-dark-mode"),d.update_theme_mode(e),v(e)}(!h)},checked:h}),(0,s.createElement)("span",{className:"theme-mood"},(0,s.createElement)("span",{className:"icon"},(0,s.createElement)("i",{className:"btl btl-sun"})),(0,s.createElement)("span",{className:"icon"},(0,s.createElement)("i",{className:"btl btl-moon"}))))))};F.propTypes=A;const q=(0,c.Ng)(function(e){return{activity:e.activity,favouriteSort:e.favouriteSort}},function(e){return{linksView:(0,r.zH)(d.xb,e),sortFavourite:(0,r.zH)(u.sortFavourite,e),update_theme_mode:(0,r.zH)(d.Q7,e)}})(F)},4138(e,t,a){a.r(t),a.d(t,{default:()=>u});var n=a(1609),l=a(7723),s=a(150),i=a(9555),c=a(9735),r=(0,n.lazy)(function(){return Promise.all([a.e(5),a.e(949),a.e(216)]).then(a.bind(a,9726))}),o=(0,n.lazy)(function(){return Promise.all([a.e(5),a.e(757),a.e(118),a.e(488)]).then(a.bind(a,2504))});const m=function(){var e=[{label:(0,l.__)("Full Site Link Scanner","betterlinks"),type:"pro"},{label:(0,l.__)("BetterLinks Broken Link Scanner","betterlinks"),type:"pro"}],t=[(0,n.createElement)(o,null),(0,n.createElement)(r,null)],a=betterLinksHooks.applyFilters("betterLinksSettingsBrokenLinkCheckerTabList",e),m=betterLinksHooks.applyFilters("betterLinksSettingsOptionsTabPanelList",t);return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(i.tU,null,(0,n.createElement)(i.wb,null,a.map(function(e,t){return(0,n.createElement)(i.oz,{key:t},e.label,"pro"===e.type&&!c.JT&&(0,n.createElement)(s.A,null))})),m.map(function(e,t){return(0,n.createElement)(i.Kp,{key:t},e)})))};var d=a(6560);const u=function(){return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(d.A,{label:(0,l.__)("Link Scanner","betterlinks")}),(0,n.createElement)(m,null))}}}]);